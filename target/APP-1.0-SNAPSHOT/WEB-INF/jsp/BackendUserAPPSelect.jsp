<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%--
  Created by IntelliJ IDEA.
  User: root
  Date: 2019/9/11
  Time: 11:54
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
    String path=request.getContextPath();
    String BasePath=request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>
<html lang="en">
<head>
    <base href="<%=BasePath%>">
    <title>APPÂÆ°Ê†∏</title>

    <!-- Bootstrap -->
    <link href="statics/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="statics/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="statics/css/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
    <link href="statics/css/green.css" rel="stylesheet">
    <!-- Datatables -->
    <link href="statics/css/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="statics/css/buttons.bootstrap.min.css" rel="stylesheet">
    <link href="statics/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
    <link href="statics/css/responsive.bootstrap.min.css" rel="stylesheet">
    <link href="statics/css/scroller.bootstrap.min.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="statics/css/custom.min.css" rel="stylesheet">
    <style>
        .table_input select{
            width: 182px;
        }
        .table_input td{
            width: 200px;
            height: 50px;
        }
        .table_input td:nth-child(odd){
            text-align: right;
        }
        .div_caozuo a{
            display: block;
            line-height: 25px;
            width: 100px;
        }
        .div_caozuo div{
            display: none;
            position: absolute;
            background: #FFFFFF;
        }
    </style>
</head>

<body class="nav-md">
<div class="container body">
    <div class="main_container">
            <jsp:include page="sidebar.jsp" flush="true"/>
        <!-- page content -->
        <div class="right_col" role="main">
            <div class="">
                <div class="page-title">
                    <div class="title_left">
                        <h3>APPÂÆ°Ê†∏<small>${sessionScope.userCode}-ÊÇ®ÂèØ‰ª•ÈÄöËøáÊêúÁ¥¢ÊàñËÄÖÂÖ∂‰ªñÁöÑÁ≠õÈÄâÈ°πÂØπAPP‰ø°ÊÅØËøõË°å‰øÆÊîπ„ÄÅÂà†Èô§Á≠âÁÆ°ÁêÜÊìç‰Ωúüòä</small></h3>
                    </div>
                </div>

                <div class="clearfix"></div>

                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <form method="get" action="BackendUser/send">
                                    <table class="table_input">
                                        <tr>
                                            <td>ËΩØ‰ª∂ÂêçÁß∞Ôºö</td>
                                            <td><input type="text" name="softwareName"></td>
                                            <td>ÊâÄÂ±ûÂπ≥Âè∞Ôºö</td>
                                            <td>
                                                <select name="flatformId" class="platform">
                                                    <option value="0">-ËØ∑ÈÄâÊã©-</option>
                                                    <option value="1">ÈÄöÁî®</option>
                                                    <option value="2">ÊâãÊú∫</option>
                                                    <option value="3">Âπ≥Êùø</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>‰∏ÄÁ∫ßÂàÜÁ±ªÔºö</td>
                                            <td>
                                                <select name="categoryLevel1" class="leve1">
                                                    <option value="0">-ËØ∑ÈÄâÊã©-</option>
                                                </select>
                                            </td>
                                            <td>‰∫åÁ∫ßÂàÜÁ±ªÔºö</td>
                                            <td>
                                                <select name="categoryLevel2">
                                                    <option value="0">-ËØ∑ÈÄâÊã©-</option>
                                                </select>
                                            </td>
                                            <td>‰∏âÁ∫ßÂàÜÁ±ªÔºö</td>
                                            <td>
                                                <select name="categoryLevel3">
                                                    <option value="0">-ËØ∑ÈÄâÊã©-</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><input type="submit" value="Êü•ËØ¢"/></td>
                                        </tr>

                                    </table>
                                </form>
                            </div>

                            <div class="x_content">
                                <table id="datatable" class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <td>ËΩØ‰ª∂id</td>
                                        <th>ËΩØ‰ª∂ÂêçÁß∞</th>
                                        <th>APKÂêçÁß∞</th>
                                        <th>ËΩØ‰ª∂Â§ßÂ∞è(Âçï‰ΩçÔºöM)</th>
                                        <th>ÊâÄÂ±ûÂπ≥Âè∞</th>
                                        <th>ÊâÄÂ±ûÂàÜÁ±ª(‰∏ÄÁ∫ßÂàÜÁ±ª„ÄÅ‰∫åÁ∫ßÂàÜÁ±ª„ÄÅ‰∏âÁ∫ßÂàÜÁ±ª)</th>
                                        <th>Áä∂ÊÄÅ</th>
                                        <th>‰∏ãËΩΩÊ¨°Êï∞</th>
                                        <th>ÊúÄÊñ∞ÁâàÊú¨Âè∑</th>
                                        <th>Êìç‰Ωú</th>
                                    </tr>
                                    </thead>


                                    <tbody>
                                    <c:forEach items="${appList}" var="AppInfo">
                                        <tr>
                                            <td>${AppInfo.id}</td>
                                            <td>${AppInfo.softwareName}</td>
                                            <td>${AppInfo.APKName}</td>
                                            <td>${AppInfo.softwareSize}</td>
                                            <td>
                                                <c:if test="${AppInfo.flatformId==1}">ÈÄöÁî®</c:if>
                                                <c:if test="${AppInfo.flatformId==2}">ÊâãÊú∫</c:if>
                                                <c:if test="${AppInfo.flatformId==3}">Âπ≥Êùø</c:if>
                                            </td>
                                            <td>${AppInfo.category1Name}->${AppInfo.category2Name}->${AppInfo.category3Name}</td>
                                            <td>
                                                <c:if test="${AppInfo.status==1}">ÂæÖÂÆ°Ê†∏</c:if>
                                                <c:if test="${AppInfo.status==2}">ÂÆ°Ê†∏ÈÄöËøá</c:if>
                                                <c:if test="${AppInfo.status==3}">Êú™ÈÄöËøá</c:if>
                                                <c:if test="${AppInfo.status==4}">Â∑≤‰∏äÊû∂</c:if>
                                                <c:if test="${AppInfo.status==5}">Â∑≤‰∏ãÊû∂</c:if>
                                            </td>
                                            <td>${AppInfo.downloads}</td>
                                            <td>${AppInfo.versionId}</td>

                                            <td>
                                                <c:if test="${AppInfo.versionId!=null}">
                                                    <a href="${pageContext.request.contextPath}/BackendUser/toShenHe?appId=${AppInfo.id}"><input type="button" value="ÂÆ°Ê†∏"></a>
                                                </c:if>
                                            </td>
                                        </tr>
                                    </c:forEach>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>


            </div>
            </div>
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer>
            <div class="pull-right">
                Gentelella - Bootstrap Admin Template by <a href="https://colorlib.com">Colorlib</a>
            </div>
            <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
    </div>
</div>


<!-- jQuery -->
<script src="static/js/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="static/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="static/js/fastclick.js"></script>
<!-- NProgress -->
<script src="static/js/nprogress.js"></script>
<!-- iCheck -->
<script src="static/js/icheck.min.js"></script>
<!-- Datatables -->
<script src="static/js/jquery.dataTables.min.js"></script>
<script src="static/js/dataTables.bootstrap.min.js"></script>
<script src="static/js/dataTables.buttons.min.js"></script>
<script src="static/js/buttons.bootstrap.min.js"></script>
<script src="static/js/buttons.flash.min.js"></script>
<script src="static/js/buttons.html5.min.js"></script>
<script src="static/js/buttons.print.min.js"></script>
<script src="static/js/dataTables.fixedHeader.min.js"></script>
<script src="static/js/dataTables.keyTable.min.js"></script>
<script src="static/js/dataTables.responsive.min.js"></script>
<script src="static/js/responsive.bootstrap.js"></script>
<script src="static/js/datatables.scroller.min.js"></script>
<script src="static/js/jszip.min.js"></script>
<script src="static/js/pdfmake.min.js"></script>
<script src="static/js/vfs_fonts.js"></script>

<!-- Custom Theme Scripts -->
<script src="static/js/custom.min.js"></script>
<!-- Datatables -->
<script>
    $(document).ready(function() {
        //ÁÇπÂáªÊìç‰Ωú
        $(".div_caozuo_click").click(function () {
            $(this).next().toggle(500);
        });

        //Âà†Èô§APP
        $(".appDel").click(function () {
            var name=$(this).parents("tr").children("td").first().next().text();
            var id=$(this).parents("tr").children("td").first().text();
            if(confirm("ÊòØÂê¶Âà†Èô§ËΩØ‰ª∂'"+name)){
                //Âà†Èô§
                $.getJSON("App/delApp?id="+id,function (data) {
                    if(data[0]=="true"){
                        //Âà†Èô§ÊàêÂäü
                        alert("Âà†Èô§ÊàêÂäüÔºÅÔºÅ");
                        window.location.href="/APP/DevUser/manage";
                    }else{
                        alert("Âà†Èô§Â§±Ë¥•ÔºÅÔºÅ");
                    }
                });
            }
        });
            
        var handleDataTableButtons = function() {
            if ($("#datatable-buttons").length) {
                $("#datatable-buttons").DataTable({
                    dom: "Bfrtip",
                    buttons: [
                        {
                            extend: "copy",
                            className: "btn-sm"
                        },
                        {
                            extend: "csv",
                            className: "btn-sm"
                        },
                        {
                            extend: "excel",
                            className: "btn-sm"
                        },
                        {
                            extend: "pdfHtml5",
                            className: "btn-sm"
                        },
                        {
                            extend: "print",
                            className: "btn-sm"
                        },
                    ],
                    responsive: true
                });
            }
        };

        TableManageButtons = function() {
            "use strict";
            return {
                init: function() {
                    handleDataTableButtons();
                }
            };
        }();

        $('#datatable').dataTable();

        $('#datatable-keytable').DataTable({
            keys: true
        });

        $('#datatable-responsive').DataTable();

        $('#datatable-scroller').DataTable({
            ajax: "js/datatables/json/scroller-demo.json",
            deferRender: true,
            scrollY: 380,
            scrollCollapse: true,
            scroller: true
        });

        $('#datatable-fixed-header').DataTable({
            fixedHeader: true
        });

        var $datatable = $('#datatable-checkbox');

        $datatable.dataTable({
            'order': [[ 1, 'asc' ]],
            'columnDefs': [
                { orderable: false, targets: [0] }
            ]
        });
        $datatable.on('draw.dt', function() {
            $('input').iCheck({
                checkboxClass: 'icheckbox_flat-green'
            });
        });

        TableManageButtons.init();
    });
</script>
<!-- /Datatables -->
</body>
</html>
